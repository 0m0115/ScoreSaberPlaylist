import{r as p,o as y,c as Q,a as oe,d as q,w as o,b as t,e as b,t as C,f as h,u as r,G as ye,g as K,p as ne,h as le,i as N,j as U,k as T,F as X,l as ue,U as te,m as be,n as he,v as ke,S as Se,q as j,_ as Ee,s as $,x as de,C as Ce,y as Qe,D as pe,z as Ie,A as we,B as Ae,E as xe,H as Be,I as Ne,J as Ue}from"./vendor.bf32044b.js";const Pe=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}};Pe();var Y=(e,a)=>{const n=e.__vccOpts||e;for(const[s,l]of a)n[s]=l;return n};const Me={};function Je(e,a){const n=p("router-view");return y(),Q(n)}var ze=Y(Me,[["render",Je]]),ae={getScoreSaberData:e=>oe.post("https://0m0.avosapps.us/1.1/functions/getScoreSaberData",{url:e},{headers:{"x-lc-id":"B1s8viG57mIaYwcxmYKgndRp-MdYXbMMI","x-lc-key":"9QwyH5wTJQdz41P5S2qMUaS0","Content-Type":"application/json"}}).then(a=>{var n;return(n=a==null?void 0:a.data)==null?void 0:n.result})},ee={version:"1.4.3",pageSize:100};function Re(e){return oe.get(e).then(a=>a.data)}var O={getPlayerInfo(e){return ae.getScoreSaberData(`https://scoresaber.com/api/player/${e}/full`)},getScores(e,a,n=ee.pageSize,s="top"){return ae.getScoreSaberData(`https://scoresaber.com/api/player/${e}/scores?page=${a}&sort=${s}&limit=${n}&withMetadata=false`).then(l=>l.playerScores)},getLeaderBoardInfo(e){return ae.getScoreSaberData(`https://scoresaber.com/api/leaderboard/by-id/${e}/info`)},getSongInfo(e){return Re(`https://beatsaver.com/api/maps/hash/${e}`)},downloadFile(e,a){return oe.get(e,{responseType:"blob"}).then(n=>{const s=new Blob([n.data]),l=document.createElement("a");l.href=URL.createObjectURL(s),l.download=a,l.click(),URL.revokeObjectURL(l.href)}).catch(console.error)}};function Fe(e,a){const{type:n,order:s}=a;e.sort((l,c)=>l[n]>c[n]?-1:1),s==="ASC"&&e.reverse()}async function De(e){var f,i,m;if(e.acc!==void 0&&e.acc!==-1/0)return e.acc;if(!e.baseScore)return 0;if(e.ranked)return e.baseScore/e.maxScore*100;let a=null;try{a=await O.getLeaderBoardInfo(e.id)}catch{return-1/0}const n=a.difficulties.findIndex(S=>S.leaderboardId===e.id);if(n===-1)return-1/0;let s=null;try{s=await O.getSongInfo(e.songHash)}catch{return-1/0}const l=(i=(f=s==null?void 0:s.versions)==null?void 0:f[0])==null?void 0:i.diffs[n];if(e.key=s==null?void 0:s.id,e.mapperId=(m=s==null?void 0:s.uploader)==null?void 0:m.id,!l)return-1/0;const c=l.notes;if(c>13)e.maxScore=c*920-7245;else if(c>5)e.maxScore=c*460-1265;else if(c>1)e.maxScore=c*230-115;else if(c===1)e.maxScore=115;else return-1/0;return e.baseScore/e.maxScore*100}async function Ke(e,a,n){if(n=Math.min(n,e.length),!n)return;const s=[];for(let f=0;f<n;f++){const i=e[f],m={songName:i.songName,hash:i.songHash,difficulties:[{characteristic:"Standard",name:i.difficultyRaw.split("_")[1]}]};s.push(m)}const l={playlistTitle:a,playlistAuthor:"ScoreSaberPlaylist",songs:s,image:"data:image/png;base64,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"},c=`data:application/json;charset=utf-8,${encodeURIComponent(JSON.stringify(l))}`;O.downloadFile(c,`${a}.bplist`)}function Te(e){const a=e.score,n=e.leaderboard;return{id:n.id,rank:a.rank,baseScore:a.baseScore,maxScore:n.maxScore,pp:a.pp,ppWeighted:a.pp*a.weight,fullCombo:a.fullCombo,timeSet:q(a.timeSet),songHash:n.songHash,songName:n.songName,songSubName:n.songSubName,songAuthorName:n.songAuthorName,levelAuthorName:n.levelAuthorName,difficultyRaw:n.difficulty.difficultyRaw,ranked:n.ranked,stars:n.stars,coverImage:n.coverImage}}function je(e){const a=/scoresaber.com\/u\/(\S+)/.exec(e);return a!=null&&a[1]?a[1]:e}var H={sort:Fe,getAcc:De,downloadPlaylist:Ke,playerScoreToItem:Te,matchPlayerId:je};function Oe(e,a){return a.rankedType==="All"||(e.ranked?a.rankedType==="Ranked":a.rankedType==="UnRanked")}function Le(e,a){return a.fullComboType==="All"||(e.fullCombo?a.fullComboType==="FullCombo":a.fullComboType==="UnFullCombo")}function He(e,a){var l,c;if(!a.date.enable||((c=(l=a.date)==null?void 0:l.value)==null?void 0:c.length)<2)return!0;const n=q(a.date.value[0]).startOf("day"),s=q(a.date.value[1]).endOf("day");return e.timeSet>=n&&e.timeSet<=s}async function Ye(e,a){var l,c;if(e.acc=await H.getAcc(e),!a.acc.enable||((c=(l=a.acc)==null?void 0:l.value)==null?void 0:c.length)<2)return!0;const n=a.acc.value[0],s=a.acc.value[1];return e.acc>=n&&e.acc<=s}function Ge(e,a){var l,c;if(!a.rank.enable||((c=(l=a.rank)==null?void 0:l.value)==null?void 0:c.length)<2)return!0;const n=a.rank.value[0],s=a.rank.value[1];return e.rank>=n&&(e.rank<=s||s===300)}function Ze(e,a){var l,c;if(a.rankedType==="UnRanked"||!a.pp.enable||((c=(l=a.pp)==null?void 0:l.value)==null?void 0:c.length)<2)return!0;const n=a.pp.value[0],s=a.pp.value[1];return e.pp>=n&&(e.pp<=s||s===600)}function Ve(e,a){var l,c;if(a.rankedType==="UnRanked"||!a.stars.enable||((c=(l=a.stars)==null?void 0:l.value)==null?void 0:c.length)<2)return!0;const n=a.stars.value[0],s=a.stars.value[1];return e.stars>=n&&e.stars<=s}function We(e,a,n){if(!a.competitor.enable||!a.competitor.id)return e.competitorAcc=null,e.competitorPP=null,!0;const s=n.get(e.id),l=s==null?void 0:s.baseScore;return l?(e.competitorPP=s==null?void 0:s.pp,e.competitorAcc=e.acc!==void 0&&e.acc>0?l/e.maxScore*100:void 0,a.competitor.type==="All"?!0:a.competitor.type==="Lower"?e.baseScore<=l:e.baseScore>=l):(e.competitorAcc=null,e.competitorPP=null,a.competitor.unplayed)}var $e={async dataFilter(e,a,n){return Oe(e,a)&&Le(e,a)&&He(e,a)&&Ge(e,a)&&Ze(e,a)&&Ve(e,a)&&await Ye(e,a)&&We(e,a,n)}};const re=e=>(ne("data-v-7ff865b8"),e=e(),le(),e),qe={class:"player-info"},Xe=re(()=>h("span",null,"Global Ranking",-1)),ea=re(()=>h("span",null,"Performance Points",-1)),aa=re(()=>h("span",null,"Average Ranked Accuracy",-1)),ta={props:{playerInfo:Object},setup(e){const a=e;function n(){window.open(`https://scoresaber.com/u/${a.playerInfo.id}`,"_blank")}function s(){const l=Math.ceil(a.playerInfo.rank/50);window.open(`https://scoresaber.com/rankings?page=${l}`,"_blank")}return(l,c)=>{const f=p("a-avatar"),i=p("a-button"),m=p("a-tooltip"),S=p("a-card-meta"),E=p("a-card");return y(),Q(E,null,{default:o(()=>[t(S,null,{avatar:o(()=>[t(f,{size:64,src:e.playerInfo.avatar,onClick:n,class:"cursor-pointer"},null,8,["src"])]),title:o(()=>[t(i,{type:"primary",size:"large",shape:"round",block:"",ghost:"",class:"player-info-text",onClick:n},{default:o(()=>[b(C(e.playerInfo.name),1)]),_:1})]),description:o(()=>{var _;return[h("div",qe,[t(m,{placement:"bottom"},{title:o(()=>[Xe]),default:o(()=>[t(i,{type:"link",class:"player-info-text",onClick:s},{default:o(()=>[t(r(ye)),b(" #"+C(e.playerInfo.rank),1)]),_:1})]),_:1}),t(m,{placement:"bottom"},{title:o(()=>[ea]),default:o(()=>[t(i,{type:"text",class:"player-info-text"},{default:o(()=>[b(C(e.playerInfo.pp)+"pp",1)]),_:1})]),_:1}),(_=e.playerInfo.scoreStats)!=null&&_.averageRankedAccuracy?(y(),Q(m,{key:0,placement:"bottom"},{title:o(()=>[aa]),default:o(()=>[t(i,{type:"text",class:"player-info-text"},{default:o(()=>[b(C(e.playerInfo.scoreStats.averageRankedAccuracy.toFixed(2))+"%",1)]),_:1})]),_:1})):K("",!0)])]}),_:1})]),_:1})}}};var oa=Y(ta,[["__scopeId","data-v-7ff865b8"]]);const na={players:"players"};function la(e){const a=localStorage.getItem(e);return new Map(JSON.parse(a))}function ra(e,a){const n=JSON.stringify(Array.from(a));localStorage.setItem(e,n)}var M={keys:na,getMap:la,setMap:ra};const sa={class:"competitor-modal-content"},ca=b("\u5168\u90E8"),ia=b("\u6392\u4F4D\u66F2"),da=b("\u975E\u6392\u4F4D\u66F2"),ua=b("\u5168\u90E8"),pa=b("\u5DF2\u5168\u8FDE"),Aa=b("\u672A\u5168\u8FDE"),ga=b(" \u4E0E "),fa=b("\u76F8\u6BD4 "),ma=b("\u5305\u542B\u5176\u672A\u73A9\u8FC7\u8C31\u9762"),_a=b(" \u67E5\u8BE2 "),va={props:{loading:Boolean},emits:["submit"],setup(e,{emit:a}){const n=N(!1),s=N(),l=M.getMap(M.keys.players),c=N(!1),f=U({}),i=U({fullComboType:"All",rankedType:"Ranked",date:{enable:!1,value:[]},acc:{enable:!1,value:[0,100]},rank:{enable:!1,greater:!1,value:[0,300]},pp:{enable:!1,value:[0,600]},stars:{enable:!1,value:[0,14]},sort:{type:"PP",order:"DESC"},competitor:{enable:!1,id:null,type:"All",totalPage:0,unplayed:!1}});function m(){a("submit",i)}async function S(){if(!s.value)return;const u=H.matchPlayerId(s.value);await E(u)}async function E(u){c.value=!0;try{const d=await O.getPlayerInfo(u);f.id=d.id,f.name=d.name,f.avatar=d.profilePicture,i.competitor.totalPlayCount=d.scoreStats.totalPlayCount,i.competitor.id=d.id,i.competitor.enable=!0,l.set(d.id,{id:d.id,name:d.name,avatar:d.profilePicture}),M.setMap(M.keys.players,l),B()}catch{j.error("\u73A9\u5BB6\u4FE1\u606F\u67E5\u8BE2\u5931\u8D25")}c.value=!1}function _(){n.value=!0}function B(){n.value=!1,s.value=null}const J=U({65:"A-",80:"S",90:"SS"}),z=U({10:"10",50:"50",100:"100",200:"200",300:"300+"}),P=U({100:"100",200:"200",300:"300",400:"400",500:"500",600:"600+"}),I=U([{value:"All",label:"\u5168\u90E8"},{value:"Lower",label:"\u66F4\u4F4E"},{value:"Higher ",label:"\u66F4\u9AD8"}]),w={"font-weight":"bolder","min-height":"30px"},R={"font-weight":"bolder","font-size":"22px","background-color":"#b9d7ea"};function g(u){return u&&u>q().endOf("day")}return(u,d)=>{const k=p("a-avatar"),v=p("a-tooltip"),x=p("a-avatar-group"),L=p("a-input-search"),Z=p("a-modal"),F=p("a-radio-button"),V=p("a-radio-group"),ie=p("a-space"),D=p("a-card"),G=p("a-switch"),ge=p("a-select"),fe=p("a-checkbox"),me=p("a-range-picker"),W=p("a-slider"),_e=p("a-button"),ve=p("a-spin");return y(),T(X,null,[t(Z,{visible:n.value,"onUpdate:visible":d[1]||(d[1]=A=>n.value=A),title:"\u8BF7\u9009\u62E9\u6BD4\u8F83\u5BF9\u8C61",width:600,footer:null,onCancel:B},{default:o(()=>[h("div",sa,[r(l).size>0?(y(),Q(x,{key:0,size:64,maxCount:5,"max-style":R},{default:o(()=>[(y(!0),T(X,null,ue(r(l).values(),A=>(y(),Q(v,{key:A.id,placement:"top",title:A.name},{default:o(()=>[t(k,{src:A.avatar,onClick:Xa=>E(A.id),class:"cursor-pointer"},null,8,["src","onClick"])]),_:2},1032,["title"]))),128))]),_:1})):K("",!0),t(L,{value:s.value,"onUpdate:value":d[0]||(d[0]=A=>s.value=A),placeholder:"\u8BF7\u8F93\u5165Score Saber\u8D26\u53F7\u6216Score Saber\u4E3B\u9875\u7F51\u5740","enter-button":"\u786E\u5B9A",size:"large","allow-clear":"",loading:c.value,onSearch:S},{prefix:o(()=>[t(r(te))]),_:1},8,["value","loading"])])]),_:1},8,["visible"]),t(ve,{spinning:e.loading,size:"large"},{default:o(()=>[t(D,{bodyStyle:{padding:"2px 24px"}},{default:o(()=>[t(D,{hoverable:"",class:"form-card-item"},{default:o(()=>[t(ie,null,{default:o(()=>[t(V,{value:r(i).rankedType,"onUpdate:value":d[2]||(d[2]=A=>r(i).rankedType=A),"button-style":"solid",size:"small"},{default:o(()=>[t(F,{value:"All"},{default:o(()=>[ca]),_:1}),t(F,{value:"Ranked"},{default:o(()=>[ia]),_:1}),t(F,{value:"UnRanked"},{default:o(()=>[da]),_:1})]),_:1},8,["value"]),t(V,{value:r(i).fullComboType,"onUpdate:value":d[3]||(d[3]=A=>r(i).fullComboType=A),"button-style":"solid",size:"small"},{default:o(()=>[t(F,{value:"All"},{default:o(()=>[ua]),_:1}),t(F,{value:"FullCombo"},{default:o(()=>[pa]),_:1}),t(F,{value:"UnFullCombo"},{default:o(()=>[Aa]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(D,{title:"\u73A9\u5BB6\u6BD4\u8F83",hoverable:"",headStyle:w,class:"form-card-item"},{extra:o(()=>[t(G,{checked:r(i).competitor.enable,"onUpdate:checked":d[4]||(d[4]=A=>r(i).competitor.enable=A)},null,8,["checked"])]),default:o(()=>[t(ie,null,{default:o(()=>[ga,r(i).competitor.enable&&r(f).id!=null?(y(),Q(v,{key:0,placement:"bottom",title:r(f).name},{default:o(()=>[t(k,{size:64,src:r(f).avatar,class:"cursor-pointer",onClick:_},null,8,["src"])]),_:1},8,["title"])):(y(),Q(v,{key:1,placement:"bottom",title:"\u8BF7\u9009\u62E9\u6BD4\u8F83\u5BF9\u8C61"},{default:o(()=>[t(k,{size:64,class:"cursor-pointer",onClick:_},{icon:o(()=>[t(r(te))]),_:1})]),_:1})),fa,t(ge,{ref:"select",size:"small",value:r(i).competitor.type,"onUpdate:value":d[5]||(d[5]=A=>r(i).competitor.type=A),style:{width:"120px"},options:r(I)},null,8,["value","options"]),t(fe,{checked:r(i).competitor.unplayed,"onUpdate:checked":d[6]||(d[6]=A=>r(i).competitor.unplayed=A)},{default:o(()=>[ma]),_:1},8,["checked"])]),_:1})]),_:1}),t(D,{title:"\u65E5\u671F",hoverable:"",headStyle:w,class:"form-card-item"},{extra:o(()=>[t(G,{checked:r(i).date.enable,"onUpdate:checked":d[7]||(d[7]=A=>r(i).date.enable=A)},null,8,["checked"])]),default:o(()=>[t(me,{value:r(i).date.value,"onUpdate:value":d[8]||(d[8]=A=>r(i).date.value=A),"disabled-date":g,disabled:!r(i).date.enable,locale:r(be)},null,8,["value","disabled","locale"])]),_:1}),t(D,{title:"ACC",hoverable:"",headStyle:w,class:"form-card-item"},{extra:o(()=>[t(G,{checked:r(i).acc.enable,"onUpdate:checked":d[9]||(d[9]=A=>r(i).acc.enable=A)},null,8,["checked"])]),default:o(()=>[t(W,{value:r(i).acc.value,"onUpdate:value":d[10]||(d[10]=A=>r(i).acc.value=A),range:"",min:65,disabled:!r(i).acc.enable,"tip-formatter":A=>`${A}%`,marks:r(J)},null,8,["value","disabled","tip-formatter","marks"])]),_:1}),t(D,{title:"\u6392\u540D",hoverable:"",headStyle:w,class:"form-card-item"},{extra:o(()=>[t(G,{checked:r(i).rank.enable,"onUpdate:checked":d[11]||(d[11]=A=>r(i).rank.enable=A)},null,8,["checked"])]),default:o(()=>[t(W,{value:r(i).rank.value,"onUpdate:value":d[12]||(d[12]=A=>r(i).rank.value=A),range:"",min:0,max:300,step:10,disabled:!r(i).rank.enable,"tip-formatter":A=>A===300?"300+":A,marks:r(z)},null,8,["value","disabled","tip-formatter","marks"])]),_:1}),he(h("div",null,[t(D,{title:"PP",hoverable:"",headStyle:w,class:"form-card-item"},{extra:o(()=>[t(G,{checked:r(i).pp.enable,"onUpdate:checked":d[13]||(d[13]=A=>r(i).pp.enable=A)},null,8,["checked"])]),default:o(()=>[t(W,{value:r(i).pp.value,"onUpdate:value":d[14]||(d[14]=A=>r(i).pp.value=A),range:"",min:0,max:600,step:10,disabled:!r(i).pp.enable,"tip-formatter":A=>A===600?"600+":A,marks:r(P)},null,8,["value","disabled","tip-formatter","marks"])]),_:1}),t(D,{title:"\u661F\u7EA7",hoverable:"",headStyle:w,class:"form-card-item"},{extra:o(()=>[t(G,{checked:r(i).stars.enable,"onUpdate:checked":d[15]||(d[15]=A=>r(i).stars.enable=A)},null,8,["checked"])]),default:o(()=>[t(W,{value:r(i).stars.value,"onUpdate:value":d[16]||(d[16]=A=>r(i).stars.value=A),range:"",min:0,max:14,disabled:!r(i).stars.enable},null,8,["value","disabled"])]),_:1})],512),[[ke,r(i).rankedType!="UnRanked"]]),t(_e,{type:"primary",shape:"round",size:"large",onClick:m,loading:e.loading},{icon:o(()=>[t(r(Se))]),default:o(()=>[_a]),_:1},8,["loading"])]),_:1})]),_:1},8,["spinning"])],64)}}};var ya=Y(va,[["__scopeId","data-v-40fe4395"]]);const se=e=>(ne("data-v-3deb779c"),e=e(),le(),e),ba={class:"data-list-item"},ha={class:"info-text text-bolder"},ka={class:"text-bolder"},Sa={class:"text-bolder"},Ea={class:"text-bolder"},Ca={class:"text-bolder"},Qa=se(()=>h("span",null,"Copy BSR",-1)),Ia=se(()=>h("span",null,"One-Click",-1)),wa=se(()=>h("span",null,"Download zip",-1)),xa={props:{item:Object},setup(e){var w,R;const a=e,{toClipboard:n}=Ee(),s=N((w=a.item)==null?void 0:w.key),l=N((R=a.item)==null?void 0:R.mapperId),c=$(()=>a.item.acc-a.item.competitorAcc),f=$(()=>a.item.pp-a.item.competitorPP),i=new Map([["_Easy_SoloStandard","E"],["_Normal_SoloStandard","N"],["_Hard_SoloStandard","H"],["_Expert_SoloStandard","Ex"],["_ExpertPlus_SoloStandard","Ex+"]]),m=new Map([["_Easy_SoloStandard","green"],["_Normal_SoloStandard","cyan"],["_Hard_SoloStandard","orange"],["_Expert_SoloStandard","red"],["_ExpertPlus_SoloStandard","purple"]]),S=$(()=>{var g;return a.item.ranked?`${a.item.stars}\u2605`:(g=i.get(a.item.difficultyRaw))!=null?g:"O"}),E=$(()=>{var g;return(g=m.get(a.item.difficultyRaw))!=null?g:"yellow"});async function _(){if(!(s.value&&l.value))return O.getSongInfo(a.item.songHash).then(g=>{var u;s.value=g==null?void 0:g.id,l.value=(u=g==null?void 0:g.uploader)==null?void 0:u.id}).catch(g=>{j.error("BeatSaver\u8C31\u9762\u4FE1\u606F\u83B7\u53D6\u5931\u8D25")})}async function B(){await _(),s.value&&window.open(`https://beatsaver.com/maps/${s.value}`,"_blank")}async function J(){await _(),l.value&&window.open(`https://beatsaver.com/profile/${l.value}`,"_blank")}async function z(){if(await _(),s.value){const g=`!bsr ${s.value}`;try{await n(g),j.success("\u590D\u5236\u6210\u529F: "+g)}catch{j.error("\u590D\u5236\u5931\u8D25")}}}async function P(){await _(),s.value&&window.open(`beatsaver://${s.value}`,"_blank")}function I(){window.open(`https://na.cdn.beatsaver.com/${a.item.songHash.toLowerCase()}.zip`,"_blank")}return(g,u)=>{const d=p("a-image"),k=p("a-col"),v=p("a-button"),x=p("a-row"),L=p("a-tooltip"),Z=p("a-space"),F=p("a-card"),V=p("a-badge-ribbon");return y(),T("div",ba,[t(V,{text:r(S),color:r(E),placement:"start"},{default:o(()=>[t(F,{bodyStyle:{padding:"10px"}},{default:o(()=>[t(x,{justify:"space-between",align:"middle",wrap:""},{default:o(()=>[t(k,{span:16},{default:o(()=>[t(x,{justify:"start",wrap:""},{default:o(()=>[t(k,null,{default:o(()=>[t(d,{width:64,src:e.item.coverImage,placeholder:"",fallback:"data:image/png;base64,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"},null,8,["src"])]),_:1}),t(k,null,{default:o(()=>[t(x,{justify:"start"},{default:o(()=>[t(v,{type:"link",onClick:B},{default:o(()=>[h("span",ha,C(e.item.songName)+" "+C(e.item.songSubName)+" - "+C(e.item.songAuthorName),1)]),_:1})]),_:1}),t(x,{justify:"start"},{default:o(()=>[t(v,{class:"info-text",type:"text",onClick:J},{default:o(()=>[b(C(e.item.levelAuthorName),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{span:8},{default:o(()=>[t(x,{justify:"end"},{default:o(()=>[t(Z,null,{default:o(()=>[h("span",ka,C(e.item.timeSet.format("YYYY.MM.DD")),1),e.item.acc!=-1/0?(y(),Q(v,{key:0,type:"primary",ghost:"",shape:"round"},{default:o(()=>[h("span",Sa,C(e.item.acc.toFixed(2))+"%",1),e.item.competitorAcc!=null&&r(c)!=0?(y(),T("span",{key:0,class:de(`num-difference ${r(c)>0?"acc-higher":"acc-lower"}`)},"\xA0"+C(`${r(c)>0?"+":""}${r(c).toFixed(2)}%`),3)):K("",!0)]),_:1})):K("",!0),e.item.ranked?(y(),Q(v,{key:1,type:"primary",ghost:"",shape:"round"},{default:o(()=>[h("span",Ea,C(e.item.pp.toFixed(2))+"pp",1),e.item.competitorPP!=null&&r(f)!=0?(y(),T("span",{key:0,class:de(`num-difference ${r(f)>0?"acc-higher":"acc-lower"}`)},"\xA0"+C(`${r(f)>0?"+":""}${r(f).toFixed(2)}`),3)):K("",!0),h("span",Ca,"\xA0/ "+C(e.item.ppWeighted.toFixed(2))+"pp",1)]),_:1})):K("",!0),t(L,{placement:"bottom"},{title:o(()=>[Qa]),default:o(()=>[t(v,{type:"primary",shape:"circle",onClick:z},{icon:o(()=>[t(r(Ce))]),_:1})]),_:1}),t(L,{placement:"bottom"},{title:o(()=>[Ia]),default:o(()=>[t(v,{type:"primary",shape:"circle",onClick:P},{icon:o(()=>[t(r(Qe))]),_:1})]),_:1}),t(L,{placement:"bottom"},{title:o(()=>[wa]),default:o(()=>[t(v,{type:"primary",shape:"circle",onClick:I},{icon:o(()=>[t(r(pe))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["text","color"])])}}};var Ba=Y(xa,[["__scopeId","data-v-3deb779c"]]);const Na=b(" \u6309 "),Ua=b("\u6392\u5E8F "),Pa={props:{loading:Boolean},emits:["change"],setup(e,{emit:a}){const n=e,s=U({type:"pp",order:"DESC"});Ie(()=>n.loading,(i,m)=>{i&&(s.type="pp",s.order="DESC")});const l=U([{value:"pp",label:"PP"},{value:"timeSet",label:"\u65E5\u671F"},{value:"stars",label:"\u661F\u7EA7"},{value:"acc",label:"ACC"}]),c=U([{value:"DESC",label:"\u4ECE\u5927\u5230\u5C0F"},{value:"ASC",label:"\u4ECE\u5C0F\u5230\u5927"}]);function f(){a("change",s)}return(i,m)=>{const S=p("a-select"),E=p("a-space");return y(),Q(E,null,{default:o(()=>[Na,t(S,{ref:"select",size:"small",value:r(s).type,"onUpdate:value":m[0]||(m[0]=_=>r(s).type=_),style:{width:"120px"},options:r(l),onChange:f},null,8,["value","options"]),t(S,{ref:"select",size:"small",value:r(s).order,"onUpdate:value":m[1]||(m[1]=_=>r(s).order=_),style:{width:"120px"},options:r(c),onChange:f},null,8,["value","options"]),Ua]),_:1})}}};const Ma=b(" \u4E0B\u8F7D\u6B4C\u5355 "),Ja={class:"model"},za=b(" \u6B4C\u5355\u6807\u9898 "),Ra=b(" \u4E0B\u8F7D\u524D "),Fa=b(" \u9996 "),Da=b("\u53D6\u6D88"),Ka=b("\u786E\u5B9A"),Ta={props:{data:Object,loading:Boolean},setup(e){const a=e,n=N(!1),s=N("ScoreSaberPlaylist"),l=N(0),c={pageSize:8,showTotal:(E,_)=>`\u5171 ${E} \u6761\u6570\u636E [ ${_[0]} - ${_[1]} ]`,showQuickJumper:!0};async function f(){await H.downloadPlaylist(a.data,s.value,l.value),m()}function i(){l.value=a.data.length,n.value=!0}function m(){n.value=!1}function S(E){H.sort(a.data,E)}return(E,_)=>{const B=p("a-button"),J=p("a-space"),z=p("a-card"),P=p("a-spin"),I=p("a-list"),w=p("a-input"),R=p("a-input-number"),g=p("a-modal");return y(),T(X,null,[t(I,{"data-source":e.data,pagination:c,class:"data-list"},{header:o(()=>[t(P,{spinning:e.loading,size:"large"},{default:o(()=>{var u;return[e.loading||((u=e.data)==null?void 0:u.length)?(y(),Q(z,{key:0,hoverable:""},{default:o(()=>[t(J,{size:"large"},{default:o(()=>[t(Pa,{loading:e.loading,onChange:S},null,8,["loading"]),t(B,{type:"primary",shape:"round",size:"large",loading:e.loading,onClick:i},{icon:o(()=>[t(r(pe))]),default:o(()=>[Ma]),_:1},8,["loading"])]),_:1})]),_:1})):K("",!0)]}),_:1},8,["spinning"])]),renderItem:o(({item:u})=>[(y(),Q(Ba,{item:u,key:u.id},null,8,["item"]))]),_:1},8,["data-source"]),t(g,{visible:n.value,"onUpdate:visible":_[2]||(_[2]=u=>n.value=u),title:"\u8BF7\u8F93\u5165\u6B4C\u5355\u6807\u9898"},{footer:o(()=>[t(B,{key:"back",onClick:m},{default:o(()=>[Da]),_:1}),t(B,{key:"submit",type:"primary",loading:e.loading,onClick:f},{default:o(()=>[Ka]),_:1},8,["loading"])]),default:o(()=>[h("div",Ja,[h("div",null,[t(w,{value:s.value,"onUpdate:value":_[0]||(_[0]=u=>s.value=u),placeholder:"\u8BF7\u8F93\u5165\u6B4C\u5355\u6807\u9898"},{addonBefore:o(()=>[za]),_:1},8,["value"])]),h("div",null,[Ra,t(R,{value:l.value,"onUpdate:value":_[1]||(_[1]=u=>l.value=u),min:1,max:a.data.length,precision:0},null,8,["value","max"]),Fa])])]),_:1},8,["visible"])],64)}}};var ja=Y(Ta,[["__scopeId","data-v-4496b1fc"]]);const Oa={setup(e){const a=we(7),n=[];let s=null;const l=new Map,c=U({}),f=U([]),i=N(0),m=N(!1),S=Ae(),E=S.currentRoute.value.params.id;E&&_(E);function _(g){O.getPlayerInfo(g).then(u=>{c.id=u.id,c.name=u.name,c.avatar=u.profilePicture,c.pp=u.pp,c.rank=u.rank,i.value=Math.ceil(u.scoreStats.totalPlayCount/ee.pageSize);const d=M.getMap(M.keys.players);d.set(u.id,{id:u.id,name:u.name,avatar:u.profilePicture}),M.setMap(M.keys.players,d)}).catch(u=>{console.error(u),j.error("\u73A9\u5BB6\u4FE1\u606F\u67E5\u8BE2\u5931\u8D25"),S.push("/")})}async function B(g){if(m.value)return;if(!(c!=null&&c.id)){j.error("\u7528\u6237\u4FE1\u606F\u67E5\u8BE2\u5931\u8D25"),S.push("/");return}m.value=!0,f.length=0,console.time("\u603B\u8017\u65F6"),console.time("\u67E5\u8BE2\u73A9\u5BB6\u8BB0\u5F55\u8017\u65F6"),await z(),console.timeEnd("\u67E5\u8BE2\u73A9\u5BB6\u8BB0\u5F55\u8017\u65F6"),console.time("\u67E5\u8BE2\u6BD4\u8F83\u5BF9\u8C61\u8BB0\u5F55\u8017\u65F6"),await J(g),console.timeEnd("\u67E5\u8BE2\u6BD4\u8F83\u5BF9\u8C61\u8BB0\u5F55\u8017\u65F6"),console.time("\u5904\u7406\u6570\u636E\u8017\u65F6"),await w(g),console.timeEnd("\u5904\u7406\u6570\u636E\u8017\u65F6"),console.timeEnd("\u603B\u8017\u65F6"),console.log("------------------------------");const u={type:"pp",order:"DESC"};H.sort(f,u),m.value=!1}async function J(g){const u=g.competitor.id;if(!g.competitor.enable||!u||u===s||(l.clear(),u===E))return;s=u;const d=Math.ceil(g.competitor.totalPlayCount/ee.pageSize);await P(u,d,v=>{const x=v.leaderboard.id,L=v.score.baseScore,Z=v.score.pp;l.set(x,{baseScore:L,pp:Z})})}async function z(){if(n!=null&&n.length)return;const g=u=>{const d=H.playerScoreToItem(u);n.push(d)};await P(c==null?void 0:c.id,i.value,g)}async function P(g,u,d){const k=[];for(let v=1;v<=u;v++){const x=I(g,v,d);k.push(x)}await Promise.all(k)}async function I(g,u,d){try{const k=await O.getScores(g,u);for(const v of k)d(v)}catch(k){console.error(k),j.error("ScoreSaber\u8BB0\u5F55\u67E5\u8BE2\u5F02\u5E38")}}async function w(g){const u=[];for(const d of n){const k=a(()=>R(d,g));u.push(k)}await Promise.all(u)}async function R(g,u){await $e.dataFilter(g,u,l)&&f.push(g)}return(g,u)=>{var x;const d=p("a-col"),k=p("a-row"),v=p("a-spin");return y(),Q(v,{spinning:((x=r(c))==null?void 0:x.id)===void 0,size:"large"},{default:o(()=>[t(k,{justify:"space-between",align:"top",class:"main-layout"},{default:o(()=>[t(d,{span:7,class:"main-layout-slider"},{default:o(()=>[t(oa,{"player-info":r(c)},null,8,["player-info"]),t(ya,{onSubmit:B,loading:m.value},null,8,["loading"])]),_:1}),t(d,{span:17},{default:o(()=>[t(ja,{data:r(f),loading:m.value},null,8,["data","loading"])]),_:1})]),_:1})]),_:1},8,["spinning"])}}};var La=Y(Oa,[["__scopeId","data-v-33aba184"]]);const Ha=e=>(ne("data-v-217905c8"),e=e(),le(),e),Ya={class:"login-layout"},Ga={class:"login-content"},Za=Ha(()=>h("h1",null,"Score Saber Playlist",-1)),Va={setup(e){const a=N(),n=N(!1),s=Ae(),l=M.getMap(M.keys.players);function c(){!a.value||(n.value=!0,a.value=H.matchPlayerId(a.value),O.getPlayerInfo(a.value).then(m=>{n.value=!1,f(a.value)}).catch(m=>{console.error(m),n.value=!1,j.error("\u67E5\u8BE2\u7528\u6237\u4FE1\u606F\u5931\u8D25")}))}function f(m){s.push(`/u/${m}`)}const i={"font-weight":"bolder","font-size":"22px","background-color":"#b9d7ea"};return(m,S)=>{const E=p("a-image"),_=p("a-avatar"),B=p("a-tooltip"),J=p("a-avatar-group"),z=p("a-input-search"),P=p("a-card");return y(),T("div",Ya,[t(P,null,{default:o(()=>[h("div",Ga,[t(E,{width:128,preview:!1,src:"https://scoresaber.com/images/logo.svg"}),h("div",null,[Za,h("h3",null,"Version "+C(r(ee).version),1)]),r(l).size>0?(y(),Q(J,{key:0,size:64,maxCount:5,"max-style":i},{default:o(()=>[(y(!0),T(X,null,ue(r(l).values(),I=>(y(),Q(B,{key:I.id,placement:"top",title:I.name},{default:o(()=>[t(_,{src:I.avatar,onClick:w=>f(I.id),class:"cursor-pointer"},null,8,["src","onClick"])]),_:2},1032,["title"]))),128))]),_:1})):K("",!0),t(z,{value:a.value,"onUpdate:value":S[0]||(S[0]=I=>a.value=I),placeholder:"\u8BF7\u8F93\u5165Score Saber\u8D26\u53F7\u6216Score Saber\u4E3B\u9875\u7F51\u5740","enter-button":"\u786E\u5B9A",size:"large","allow-clear":"",loading:n.value,onSearch:c},{prefix:o(()=>[t(r(te))]),_:1},8,["value","loading"])])]),_:1})])}}};var Wa=Y(Va,[["__scopeId","data-v-217905c8"]]);const $a=[{path:"/",component:Wa},{path:"/u/:id",component:La}],qa=xe({history:Be(),routes:$a});const ce=Ne(ze);ce.use(qa);ce.use(Ue);ce.mount("#app");
