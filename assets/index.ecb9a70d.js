import{r as p,o as k,c as w,a as j,d as K,w as o,b as n,e as h,t as C,f as Q,u as c,G as ae,g as D,p as O,h as H,i as B,l as te,j as ne,v as oe,S as le,_ as re,k as x,m as V,n as L,C as se,q as ce,D as W,s as P,x as ie,F as de,y as q,z as ue,A as pe,B as Ae,E as ge}from"./vendor.96a886e9.js";const fe=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const A of s.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&l(A)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};fe();var J=(e,a)=>{const t=e.__vccOpts||e;for(const[l,r]of a)t[l]=r;return t};const _e={};function me(e,a){const t=p("router-view");return k(),w(t)}var ve=J(_e,[["render",me]]),z={getScoreSaberData:e=>j.post("https://api2.bmob.cn/1/functions/getScoreSaberData",{url:e},{headers:{"X-Bmob-Application-Id":"17697370eb0242bd5e3b0ce8d28aa5a6","X-Bmob-REST-API-Key":"77f26b42233d5fe773d94fc806fee061","Content-Type":"application/json"}}).then(a=>{var t;return JSON.parse((t=a==null?void 0:a.data)==null?void 0:t.result)})};function ye(e){return j.get(e).then(a=>a.data)}var R={getPlayerInfo(e){return z.getScoreSaberData(`https://scoresaber.com/api/player/${e}/full`)},getScores(e,a,t=100,l="top"){return z.getScoreSaberData(`https://scoresaber.com/api/player/${e}/scores?page=${a}&sort=${l}&limit=${t}&withMetadata=false`).then(r=>r.playerScores)},getLeaderBoardInfo(e){return z.getScoreSaberData(`https://scoresaber.com/api/leaderboard/by-id/${e}/info`)},getSongInfo(e){return ye(`https://beatsaver.com/api/maps/hash/${e}`)},downloadFile(e,a){return j.get(e,{responseType:"blob"}).then(t=>{const l=new Blob([t.data]),r=document.createElement("a");r.href=URL.createObjectURL(l),r.download=a,r.click(),URL.revokeObjectURL(r.href)}).catch(console.error)}};function be(e,a){const{type:t,order:l}=a;e.sort((r,s)=>r[t]>s[t]?-1:1),l==="ASC"&&e.reverse()}async function he(e){var A,_,v;if(!e.baseScore)return 0;if(e.ranked)return e.baseScore/e.maxScore*100;let a=null;try{a=await R.getLeaderBoardInfo(e.id)}catch{return-1/0}const t=a.difficulties.findIndex(b=>b.leaderboardId===e.id);if(t===-1)return-1/0;let l=null;try{l=await R.getSongInfo(e.songHash)}catch{return-1/0}const r=(_=(A=l==null?void 0:l.versions)==null?void 0:A[0])==null?void 0:_.diffs[t];if(e.key=l==null?void 0:l.id,e.mapperId=(v=l==null?void 0:l.uploader)==null?void 0:v.id,!r)return-1/0;const s=r.notes;if(s>13)e.maxScore=s*920-7245;else if(s>5)e.maxScore=s*460-1265;else if(s>1)e.maxScore=s*230-115;else if(s===1)e.maxScore=115;else return-1/0;return e.baseScore/e.maxScore*100}async function Ee(e,a){const t=[];for(const s of e){const A={songName:s.songName,hash:s.songHash,difficulties:[{characteristic:"Standard",name:s.difficultyRaw.split("_")[1]}]};t.push(A)}const l={playlistTitle:a,playlistAuthor:"ScoreSaberPlaylist",songs:t,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAF7klEQVR4Ae2dT4hbVRTGz315SToztjh1dJKM/6hFRLoQdakuuihF0O5F6KoIIm50IbhSBHEjbnUjCi61UCnajVCo4kIpFjcK/qFY3igt7YxJk5nJy5WALWTMnHdefTdz7z3fQGlfzvdOzvm+3/QlaZox5OBreXn5QJIkvzhorbnlC1mWfVC1AUnVDdEvLAcAQFh5VT4tAKjc0rAaAoCw8qp8WgBQuaVhNQQAYeVV+bQAoHJLw2oIAMLKq/JpAUDllobV0EjHbbVarxpjnpXo7+mk5o3X7nhCooVG5sDJ091fPz/Ty2VqWs+y7HGJNpWIxhpjzINE9KRE32wka0cPL0ik0Agd+O78xiIRjX8Vfhlj1gpF/wpwCZA6FanODQCGRpH6tWtr1Wr2uos7dwOAi0mV9zSGrAsLAIALVwPqCQACCsvFqADAhasB9QQAAYXlYlQA4MLVgHoCgIDCcjFqurS01JY0vreV76kldn2bdupTk4Mrpp8PulNftTImoaRe39YGh0UOtO6q1Q/cJ/atnufLh4p6juum3W5PDXH7yW+eWKNjT8lei0ibdVpcuXN7Cxz/HwcWWkTpnKjD5qal+x/9TaTFJUBkU7wiABBvtqLNAIDIpnhFACDebEWbAQCRTfGKAEC82Yo2AwAim+IVAYB4sxVtBgBENsUrAgDxZivaTPyuYFG3GYo251+iUW1lhvcou6tm7z0yoz9lYg9UwQIwbB6mvPawBxZOjtDofxgUALgETOan7ggAqIt8cmEAMOmHuiMAoC7yyYUBwKQf6o68exZgzd7xG5UKg7ACTWETCMg7ALr7zxGZZmE09cFnNH/teKFupgJTp97iF6K7rG+comb3LZHWpcg7AOTLbpH5z3tU5We7UTbImn2i1pbmRTrXIjwGcO2w5/0BgOcBuR4PALh22PP+AMDzgFyPBwBcO+x5/2CfBYwfbY/S8edWFXzZASX5xQIRX7ZmgWyyxIvGVSP+r1vFvWak8A6AhatPE1HxX0z92z+iXvNUoU3J8CdauHasUMcJho0jNNj7Nie5WasPPqV04/TN453+kIz+2qk009u9AyAZXRIa4OfnUCWji5RufSPcYfdlxd9quz8jJnDoAABwaG4IrQFACCk5nBEAODQ3hNYAIISUHM4IAByaG0Jr754G+mnakAwNZKPZTZnOE1WwAMytv0iWGoU22vQh6i0WvzDDNTL2b7rt8iOcJNhasAAkw59Fpg9rHRrVHhBpdxIZK/74/Z1aeHs7HgN4G81sBgMAs/HZ23sBAN5GM5vBAMBsfPb2XgCAt9HMZrBgnwWI7Rl1Kcl/F8unCf17+/m0KW/ttugBGP/bfHr16K25o+AsXAIUhMytCAA4dxTUAICCkLkVAQDnjoIaAFAQMrciAODcUVADAApC5lYEAJw7CmoAQEHI3IoAgHNHQQ0AKAiZWxEAcO4oqAEABSFzKwIAzh0FNQCgIGRuRQDAuaOgBgAUhMytCAA4dxTUAICCkLkVAQDnjoIaAFAQMrciAODcUVADAApC5lYEAJw7CmoAQEHI3IoAgHNHQQ0AKAiZWxEAcO4oqAEABSFzKwIAzh0FNQCgIGRuRQDAuaOgBgAUhMytCAA4dxTUAICCkLkVAQDnjoIaAFAQMrciAODcUVADAApC5lYEAJw7CmoAQEHI3IrjTwp9hRPcqJ08O/fcV983H7txzP1+6OCIXn5+nZOgVsKBWqNJFy5coS+/nROdlec2J6J3JOI0y7J3JUKi9goRiQC4srZFJ56J96dsyPyqUtWlr88N6P1P9kmb9rMse10ixiVA4lLEGgAQcbiS1QCAxKWINQAg4nAlqwEAiUsRawBAxOFKVgMAEpci1gCAiMOVrFbmZwZdIqIfJE17fdp/9vyeuyVaaGQOZJfTP4joR5margt1ZKTCMrpOp3PEWnumzDnQ8g5Ya4+vrq5+zKvKV3EJKO9ZVGcAgKjiLL8MACjvWVRnAICo4iy/DAAo71lUZwCAqOIsvwwAKO9ZVGcAgKjiLL/MP1IivdJqKho+AAAAAElFTkSuQmCC"},r=`data:application/json;charset=utf-8,${encodeURIComponent(JSON.stringify(l))}`;R.downloadFile(r,`${a}.bplist`)}var M={sort:be,getAcc:he,downloadPlaylist:Ee};function Qe(e,a){return a.rankedType==="All"||(e.ranked?a.rankedType==="Ranked":a.rankedType==="UnRanked")}function ke(e,a){return a.fullComboType==="All"||(e.fullCombo?a.fullComboType==="FullCombo":a.fullComboType==="UnFullCombo")}function Se(e,a){var r,s;if(!a.date.enable||((s=(r=a.date)==null?void 0:r.value)==null?void 0:s.length)<2)return!0;const t=K(a.date.value[0]).startOf("day"),l=K(a.date.value[1]).endOf("day");return e.timeSet>=t&&e.timeSet<=l}async function Ce(e,a){var r,s;if(e.acc=await M.getAcc(e),!a.acc.enable||((s=(r=a.acc)==null?void 0:r.value)==null?void 0:s.length)<2)return!0;const t=a.acc.value[0],l=a.acc.value[1];return e.acc>=t&&e.acc<=l}function Ie(e,a){var r,s;if(!a.rank.enable||((s=(r=a.rank)==null?void 0:r.value)==null?void 0:s.length)<2)return!0;const t=a.rank.value[0],l=a.rank.value[1];return e.rank>=t&&(e.rank<=l||l===300)}function we(e,a){var r,s;if(a.rankedType==="UnRanked"||!a.pp.enable||((s=(r=a.pp)==null?void 0:r.value)==null?void 0:s.length)<2)return!0;const t=a.pp.value[0],l=a.pp.value[1];return e.pp>=t&&(e.pp<=l||l===600)}function Be(e,a){var r,s;if(a.rankedType==="UnRanked"||!a.stars.enable||((s=(r=a.stars)==null?void 0:r.value)==null?void 0:s.length)<2)return!0;const t=a.stars.value[0],l=a.stars.value[1];return e.stars>=t&&e.stars<=l}var xe={async dataFilter(e,a){return Qe(e,a)&&ke(e,a)&&Se(e,a)&&Ie(e,a)&&we(e,a)&&Be(e,a)&&await Ce(e,a)}};const Y=e=>(O("data-v-d23a3504"),e=e(),H(),e),Ne={class:"player-info"},Ue=Y(()=>Q("span",null,"Global Ranking",-1)),Re=Y(()=>Q("span",null,"Performance Points",-1)),Je=Y(()=>Q("span",null,"Average Ranked Accuracy",-1)),Pe={props:{playerInfo:Object},setup(e){const a=e;function t(){window.open(`https://scoresaber.com/u/${a.playerInfo.id}`,"_blank")}function l(){const r=Math.ceil(a.playerInfo.rank/50);window.open(`https://scoresaber.com/rankings?page=${r}`,"_blank")}return(r,s)=>{const A=p("a-avatar"),_=p("a-button"),v=p("a-tooltip"),b=p("a-card-meta"),d=p("a-card");return k(),w(d,null,{default:o(()=>[n(b,null,{avatar:o(()=>[n(A,{size:64,src:e.playerInfo.profilePicture},null,8,["src"])]),title:o(()=>[n(_,{type:"primary",size:"large",shape:"round",block:"",ghost:"",class:"player-info-text",onClick:t},{default:o(()=>[h(C(e.playerInfo.name),1)]),_:1})]),description:o(()=>{var g;return[Q("div",Ne,[n(v,{placement:"bottom"},{title:o(()=>[Ue]),default:o(()=>[n(_,{type:"link",class:"player-info-text",onClick:l},{default:o(()=>[n(c(ae)),h(" #"+C(e.playerInfo.rank),1)]),_:1})]),_:1}),n(v,{placement:"bottom"},{title:o(()=>[Re]),default:o(()=>[n(_,{type:"text",class:"player-info-text"},{default:o(()=>[h(C(e.playerInfo.pp)+"pp",1)]),_:1})]),_:1}),(g=e.playerInfo.scoreStats)!=null&&g.averageRankedAccuracy?(k(),w(v,{key:0,placement:"bottom"},{title:o(()=>[Je]),default:o(()=>[n(_,{type:"text",class:"player-info-text"},{default:o(()=>[h(C(e.playerInfo.scoreStats.averageRankedAccuracy.toFixed(2))+"%",1)]),_:1})]),_:1})):D("",!0)])]}),_:1})]),_:1})}}};var Fe=J(Pe,[["__scopeId","data-v-d23a3504"]]);const Ke=h("\u5168\u90E8"),De=h("\u6392\u4F4D\u66F2"),Me=h("\u975E\u6392\u4F4D\u66F2"),Te=h("\u5168\u90E8"),ze=h("\u5DF2\u5168\u8FDE"),je=h("\u672A\u5168\u8FDE"),Oe=h(" \u67E5\u8BE2 "),He={props:{loading:Boolean},emits:["submit"],setup(e,{emit:a}){const t=B({fullComboType:"All",rankedType:"Ranked",date:{enable:!1,value:[]},acc:{enable:!1,value:[0,100]},rank:{enable:!1,greater:!1,value:[0,300]},pp:{enable:!1,value:[0,600]},stars:{enable:!1,value:[0,14]},sort:{type:"PP",order:"DESC"}});function l(){a("submit",t)}const r=B({65:"A-",80:"S",90:"SS"}),s=B({10:"10",50:"50",100:"100",200:"200",300:"300+"}),A=B({100:"100",200:"200",300:"300",400:"400",500:"500",600:"600+"}),_={"font-weight":"bolder","min-height":"30px"};function v(b){return b&&b>K().endOf("day")}return(b,d)=>{const g=p("a-radio-button"),I=p("a-radio-group"),N=p("a-space"),m=p("a-card"),f=p("a-switch"),y=p("a-range-picker"),i=p("a-slider"),S=p("a-button"),E=p("a-spin");return k(),w(E,{spinning:e.loading,size:"large"},{default:o(()=>[n(m,{bodyStyle:{padding:"2px 24px"}},{default:o(()=>[n(m,{hoverable:"",class:"form-card-item"},{default:o(()=>[n(N,null,{default:o(()=>[n(I,{value:c(t).rankedType,"onUpdate:value":d[0]||(d[0]=u=>c(t).rankedType=u),"button-style":"solid",size:"small"},{default:o(()=>[n(g,{value:"All"},{default:o(()=>[Ke]),_:1}),n(g,{value:"Ranked"},{default:o(()=>[De]),_:1}),n(g,{value:"UnRanked"},{default:o(()=>[Me]),_:1})]),_:1},8,["value"]),n(I,{value:c(t).fullComboType,"onUpdate:value":d[1]||(d[1]=u=>c(t).fullComboType=u),"button-style":"solid",size:"small"},{default:o(()=>[n(g,{value:"All"},{default:o(()=>[Te]),_:1}),n(g,{value:"FullCombo"},{default:o(()=>[ze]),_:1}),n(g,{value:"UnFullCombo"},{default:o(()=>[je]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),n(m,{title:"\u65E5\u671F",hoverable:"",headStyle:_,class:"form-card-item"},{extra:o(()=>[n(f,{checked:c(t).date.enable,"onUpdate:checked":d[2]||(d[2]=u=>c(t).date.enable=u)},null,8,["checked"])]),default:o(()=>[n(y,{value:c(t).date.value,"onUpdate:value":d[3]||(d[3]=u=>c(t).date.value=u),"disabled-date":v,disabled:!c(t).date.enable,locale:c(te)},null,8,["value","disabled","locale"])]),_:1}),n(m,{title:"ACC",hoverable:"",headStyle:_,class:"form-card-item"},{extra:o(()=>[n(f,{checked:c(t).acc.enable,"onUpdate:checked":d[4]||(d[4]=u=>c(t).acc.enable=u)},null,8,["checked"])]),default:o(()=>[n(i,{value:c(t).acc.value,"onUpdate:value":d[5]||(d[5]=u=>c(t).acc.value=u),range:"",min:65,disabled:!c(t).acc.enable,"tip-formatter":u=>`${u}%`,marks:c(r)},null,8,["value","disabled","tip-formatter","marks"])]),_:1}),n(m,{title:"\u6392\u540D",hoverable:"",headStyle:_,class:"form-card-item"},{extra:o(()=>[n(f,{checked:c(t).rank.enable,"onUpdate:checked":d[6]||(d[6]=u=>c(t).rank.enable=u)},null,8,["checked"])]),default:o(()=>[n(i,{value:c(t).rank.value,"onUpdate:value":d[7]||(d[7]=u=>c(t).rank.value=u),range:"",min:0,max:300,step:10,disabled:!c(t).rank.enable,"tip-formatter":u=>u===300?"300+":u,marks:c(s)},null,8,["value","disabled","tip-formatter","marks"])]),_:1}),ne(Q("div",null,[n(m,{title:"PP",hoverable:"",headStyle:_,class:"form-card-item"},{extra:o(()=>[n(f,{checked:c(t).pp.enable,"onUpdate:checked":d[8]||(d[8]=u=>c(t).pp.enable=u)},null,8,["checked"])]),default:o(()=>[n(i,{value:c(t).pp.value,"onUpdate:value":d[9]||(d[9]=u=>c(t).pp.value=u),range:"",min:0,max:600,step:10,disabled:!c(t).pp.enable,"tip-formatter":u=>u===600?"600+":u,marks:c(A)},null,8,["value","disabled","tip-formatter","marks"])]),_:1}),n(m,{title:"\u661F\u7EA7",hoverable:"",headStyle:_,class:"form-card-item"},{extra:o(()=>[n(f,{checked:c(t).stars.enable,"onUpdate:checked":d[10]||(d[10]=u=>c(t).stars.enable=u)},null,8,["checked"])]),default:o(()=>[n(i,{value:c(t).stars.value,"onUpdate:value":d[11]||(d[11]=u=>c(t).stars.value=u),range:"",min:0,max:14,disabled:!c(t).stars.enable},null,8,["value","disabled"])]),_:1})],512),[[oe,c(t).rankedType!="UnRanked"]]),n(S,{type:"primary",shape:"round",size:"large",onClick:l,loading:e.loading},{icon:o(()=>[n(c(le))]),default:o(()=>[Oe]),_:1},8,["loading"])]),_:1})]),_:1},8,["spinning"])}}};var Le=J(He,[["__scopeId","data-v-1dfdee68"]]);const Z=e=>(O("data-v-d7a2ccaa"),e=e(),H(),e),Ye={class:"data-list-item"},Ze={class:"info-text text-bolder"},Ge={class:"text-bolder"},Ve={class:"text-bolder"},We=Z(()=>Q("span",null,"Copy BSR",-1)),qe=Z(()=>Q("span",null,"One-Click",-1)),Xe=Z(()=>Q("span",null,"Download zip",-1)),$e={props:{item:Object},setup(e){var f,y;const a=e,{toClipboard:t}=re(),l=x((f=a.item)==null?void 0:f.key),r=x((y=a.item)==null?void 0:y.mapperId),s=new Map([["_Easy_SoloStandard","E"],["_Normal_SoloStandard","N"],["_Hard_SoloStandard","H"],["_Expert_SoloStandard","Ex"],["_ExpertPlus_SoloStandard","Ex+"]]),A=new Map([["_Easy_SoloStandard","green"],["_Normal_SoloStandard","cyan"],["_Hard_SoloStandard","orange"],["_Expert_SoloStandard","red"],["_ExpertPlus_SoloStandard","purple"]]),_=V(()=>{var i;return a.item.ranked?`${a.item.stars}\u2605`:(i=s.get(a.item.difficultyRaw))!=null?i:"O"}),v=V(()=>{var i;return(i=A.get(a.item.difficultyRaw))!=null?i:"yellow"});async function b(){if(!(l.value&&r.value))return R.getSongInfo(a.item.songHash).then(i=>{var S;l.value=i==null?void 0:i.id,r.value=(S=i==null?void 0:i.uploader)==null?void 0:S.id}).catch(i=>{P.error("Beat Saver\u8C31\u9762\u4FE1\u606F\u83B7\u53D6\u5931\u8D25")})}async function d(){await b(),l.value&&window.open(`https://beatsaver.com/maps/${l.value}`,"_blank")}async function g(){await b(),r.value&&window.open(`https://beatsaver.com/profile/${r.value}`,"_blank")}async function I(){if(await b(),l.value){const i=`!bsr ${l.value}`;try{await t(i),P.success("\u590D\u5236\u6210\u529F: "+i)}catch{P.error("\u590D\u5236\u5931\u8D25")}}}async function N(){await b(),l.value&&window.open(`beatsaver://${l.value}`,"_blank")}function m(){window.open(`https://na.cdn.beatsaver.com/${a.item.songHash.toLowerCase()}.zip`,"_blank")}return(i,S)=>{const E=p("a-image"),u=p("a-col"),U=p("a-button"),F=p("a-row"),T=p("a-tooltip"),X=p("a-space"),$=p("a-card"),ee=p("a-badge-ribbon");return k(),L("div",Ye,[n(ee,{text:c(_),color:c(v),placement:"start"},{default:o(()=>[n($,{bodyStyle:{padding:"10px"}},{default:o(()=>[n(F,{justify:"space-between",align:"middle",wrap:""},{default:o(()=>[n(u,{span:16},{default:o(()=>[n(F,{justify:"start",wrap:""},{default:o(()=>[n(u,null,{default:o(()=>[n(E,{width:64,src:e.item.coverImage,placeholder:"",fallback:"data:image/png;base64,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"},null,8,["src"])]),_:1}),n(u,null,{default:o(()=>[n(F,{justify:"start"},{default:o(()=>[n(U,{type:"link",onClick:d},{default:o(()=>[Q("span",Ze,C(e.item.songName)+" "+C(e.item.songSubName)+" - "+C(e.item.songAuthorName),1)]),_:1})]),_:1}),n(F,{justify:"start"},{default:o(()=>[n(U,{class:"info-text",type:"text",onClick:g},{default:o(()=>[h(C(e.item.levelAuthorName),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(u,{span:8},{default:o(()=>[n(F,{justify:"end"},{default:o(()=>[n(X,null,{default:o(()=>[Q("span",Ge,C(e.item.timeSet.format("YYYY.MM.DD")),1),e.item.acc!=-1/0?(k(),w(U,{key:0,type:"primary",ghost:"",shape:"round"},{default:o(()=>[Q("span",Ve,C(e.item.acc.toFixed(2))+"%",1)]),_:1})):D("",!0),e.item.ranked?(k(),w(U,{key:1,type:"primary",ghost:"",shape:"round",class:"text-bolder"},{default:o(()=>[h(C(e.item.pp.toFixed(2))+"pp / "+C(e.item.ppWeighted.toFixed(2))+"pp",1)]),_:1})):D("",!0),n(T,{placement:"bottom"},{title:o(()=>[We]),default:o(()=>[n(U,{type:"primary",shape:"circle",onClick:I},{icon:o(()=>[n(c(se))]),_:1})]),_:1}),n(T,{placement:"bottom"},{title:o(()=>[qe]),default:o(()=>[n(U,{type:"primary",shape:"circle",onClick:N},{icon:o(()=>[n(c(ce))]),_:1})]),_:1}),n(T,{placement:"bottom"},{title:o(()=>[Xe]),default:o(()=>[n(U,{type:"primary",shape:"circle",onClick:m},{icon:o(()=>[n(c(W))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["text","color"])])}}};var ea=J($e,[["__scopeId","data-v-d7a2ccaa"]]);const aa=h(" \u6309 "),ta=h("\u6392\u5E8F "),na={props:{loading:Boolean},emits:["change"],setup(e,{emit:a}){const t=e,l=B({type:"pp",order:"DESC"});ie(()=>t.loading,(_,v)=>{_&&(l.type="pp",l.order="DESC")});const r=B([{value:"pp",label:"PP"},{value:"timeSet",label:"\u65E5\u671F"},{value:"stars",label:"\u661F\u7EA7"},{value:"acc",label:"ACC"}]),s=B([{value:"DESC",label:"\u4ECE\u5927\u5230\u5C0F"},{value:"ASC",label:"\u4ECE\u5C0F\u5230\u5927"}]);function A(){a("change",l)}return(_,v)=>{const b=p("a-select"),d=p("a-space");return k(),w(d,null,{default:o(()=>[aa,n(b,{ref:"select",size:"small",value:c(l).type,"onUpdate:value":v[0]||(v[0]=g=>c(l).type=g),style:{width:"120px"},options:c(r),onChange:A},null,8,["value","options"]),n(b,{ref:"select",size:"small",value:c(l).order,"onUpdate:value":v[1]||(v[1]=g=>c(l).order=g),style:{width:"120px"},options:c(s),onChange:A},null,8,["value","options"]),ta]),_:1})}}};const oa=h(" \u4E0B\u8F7D\u6B4C\u5355 "),la=h("\u53D6\u6D88"),ra=h("\u786E\u5B9A"),sa={props:{data:Object,loading:Boolean},emits:["download"],setup(e,{emit:a}){const t=e,l=x(!1),r=x("ScoreSaberPlaylist"),s={pageSize:8,showTotal:(d,g)=>`\u5171 ${d} \u6761\u6570\u636E [ ${g[0]} - ${g[1]} ]`,showQuickJumper:!0};function A(){a("download",r.value),v()}function _(){l.value=!0}function v(){l.value=!1}function b(d){M.sort(t.data,d)}return(d,g)=>{const I=p("a-button"),N=p("a-space"),m=p("a-card"),f=p("a-spin"),y=p("a-list"),i=p("a-input"),S=p("a-modal");return k(),L(de,null,[n(y,{"data-source":e.data,pagination:s,class:"data-list"},{header:o(()=>[n(f,{spinning:e.loading,size:"large"},{default:o(()=>{var E;return[e.loading||((E=e.data)==null?void 0:E.length)?(k(),w(m,{key:0,hoverable:""},{default:o(()=>[n(N,{size:"large"},{default:o(()=>[n(na,{loading:e.loading,onChange:b},null,8,["loading"]),n(I,{type:"primary",shape:"round",size:"large",loading:e.loading,onClick:_},{icon:o(()=>[n(c(W))]),default:o(()=>[oa]),_:1},8,["loading"])]),_:1})]),_:1})):D("",!0)]}),_:1},8,["spinning"])]),renderItem:o(({item:E})=>[(k(),w(ea,{item:E,key:E.id},null,8,["item"]))]),_:1},8,["data-source"]),n(S,{visible:l.value,"onUpdate:visible":g[1]||(g[1]=E=>l.value=E),title:"\u8BF7\u8F93\u5165\u6B4C\u5355\u6807\u9898"},{footer:o(()=>[n(I,{key:"back",onClick:v},{default:o(()=>[la]),_:1}),n(I,{key:"submit",type:"primary",loading:e.loading,onClick:A},{default:o(()=>[ra]),_:1},8,["loading"])]),default:o(()=>[n(i,{value:r.value,"onUpdate:value":g[0]||(g[0]=E=>r.value=E),placeholder:"\u8BF7\u8F93\u5165\u6B4C\u5355\u6807\u9898"},null,8,["value"])]),_:1},8,["visible"])],64)}}};var ca=J(sa,[["__scopeId","data-v-49a69700"]]);const ia={setup(e){const t=B({}),l=B([]),r=x(0),s=x(!1),A=q(),_=A.currentRoute.value.params.id;_&&v(_);function v(m){R.getPlayerInfo(m).then(f=>{t.id=f.id,t.name=f.name,t.profilePicture=f.profilePicture,t.pp=f.pp,t.rank=f.rank,r.value=Math.ceil(f.scoreStats.totalPlayCount/100)}).catch(f=>{P.error("\u67E5\u8BE2\u7528\u6237\u4FE1\u606F\u5931\u8D25"),A.push("/")})}async function b(m){await d(m)}async function d(m){if(s.value)return;if(!(t!=null&&t.id)){P.error("\u8BF7\u8F93\u5165ScoreSaber\u8D26\u53F7");return}s.value=!0,l.length=0,console.time("\u67E5\u8BE2\u6570\u636E\u8017\u65F6");const f=[];for(let y=1;y<=r.value;y++){const i=g(y,m);f.push(i)}await Promise.all(f),console.timeEnd("\u67E5\u8BE2\u6570\u636E\u8017\u65F6"),s.value=!1}async function g(m,f){const y=await R.getScores(t==null?void 0:t.id,m,100),i=[];for(const E of y){const u=I(E,f);i.push(u)}await Promise.all(i);const S={type:"pp",order:"DESC"};M.sort(l,S)}async function I(m,f){const y=m.score,i=m.leaderboard,S={id:i.id,rank:y.rank,baseScore:y.baseScore,maxScore:i.maxScore,pp:y.pp,ppWeighted:y.pp*y.weight,fullCombo:y.fullCombo,timeSet:K(y.timeSet),songHash:i.songHash,songName:i.songName,songSubName:i.songSubName,songAuthorName:i.songAuthorName,levelAuthorName:i.levelAuthorName,difficultyRaw:i.difficulty.difficultyRaw,ranked:i.ranked,stars:i.stars,coverImage:i.coverImage};await xe.dataFilter(S,f)&&l.push(S)}async function N(m){await M.downloadPlaylist(l,m)}return(m,f)=>{const y=p("a-col"),i=p("a-row");return k(),w(i,{justify:"space-between",align:"top",class:"main-layout"},{default:o(()=>[n(y,{span:7,class:"main-layout-sider"},{default:o(()=>[n(Fe,{"player-info":c(t)},null,8,["player-info"]),n(Le,{onSubmit:b,loading:s.value},null,8,["loading"])]),_:1}),n(y,{span:17},{default:o(()=>[n(ca,{data:c(l),loading:s.value,onDownload:N},null,8,["data","loading"])]),_:1})]),_:1})}}};var da=J(ia,[["__scopeId","data-v-d863e5de"]]);const ua=e=>(O("data-v-2493bdc1"),e=e(),H(),e),pa={class:"login-layout"},Aa={class:"login-content"},ga=ua(()=>Q("div",null,[Q("h1",null,"Score Saber Playlist"),Q("h3",null,"Version 1.1.6")],-1)),fa={setup(e){const a=x(""),t=x(!1),l=q();function r(){t.value=!0;const s=/scoresaber.com\/u\/(\S+)/.exec(a.value);s&&s[1]&&(a.value=s[1]),R.getPlayerInfo(a.value).then(A=>{t.value=!1,l.push(`/u/${a.value}`)}).catch(A=>{t.value=!1,P.error("\u67E5\u8BE2\u7528\u6237\u4FE1\u606F\u5931\u8D25")})}return(s,A)=>{const _=p("a-image"),v=p("user-outlined"),b=p("a-input-search"),d=p("a-card");return k(),L("div",pa,[n(d,null,{default:o(()=>[Q("div",Aa,[n(_,{width:128,preview:!1,src:"https://scoresaber.com/images/logo.svg"}),ga,n(b,{value:a.value,"onUpdate:value":A[0]||(A[0]=g=>a.value=g),placeholder:"\u8BF7\u8F93\u5165Score Saber\u8D26\u53F7\u6216Score Saber\u4E3B\u9875\u7F51\u5740","enter-button":"\u786E\u5B9A",size:"large","allow-clear":"",loading:t.value,onSearch:r},{prefix:o(()=>[n(v,{type:"user"})]),_:1},8,["value","loading"])])]),_:1})])}}};var _a=J(fa,[["__scopeId","data-v-2493bdc1"]]);const ma=[{path:"/",component:_a},{path:"/u/:id",component:da}],va=ue({history:pe(),routes:ma});const G=Ae(ve);G.use(va);G.use(ge);G.mount("#app");
